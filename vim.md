# vim的使用



## 1. 命令行模式



| 命令    | 含义                   | 备注                        |
| ------- | ---------------------- | --------------------------- |
| yy      |                        | 3yy表示复制3行              |
| p(小写) | 光标所在行后面粘贴     |                             |
| P(大写) | 光标所在行前面粘贴     |                             |
| gg      | 光标跳到文件开始       | 3gg将光标跳到文件第三行行首 |
| G       | 光标跳到文件末尾       |                             |
| dd      | 删除当前行             | 3dd表示删除3行(包括当前行)  |
| d^      | 删除到行首，不含光标位 |                             |
| d$      | 删除到行尾，包含光标位 | 与==D==作用相同             |
| dgg     | 删除光标到文件首       |                             |
| x(小写) | 删除光标后面一个字符   | windows下delete键           |
| X(大写) | 删除光标前面一个字符   | windows下backspace键        |
| u       | 撤销操作               | ctrl+r键                    |



## 2. 编辑模式



| 命令 | 含义                       | 备注 |
| ---- | -------------------------- | ---- |
| i    | 在光标所在字符前开始插入   |      |
| a    | 在光标所在字符后开始插入   |      |
| o    | 在光标所在行下另起新行     |      |
| I    | 在光标所在行的行首插入     |      |
| A    | 在光标所在行的行尾插入     |      |
| O    | 在光标所在行的上面另起新行 |      |
| S    | 删除光标所在行并开始插入   |      |



## 3. 底行模式

1.==保存和退出==

:w

:wq

:q!

:x

2.==搜索替换==

```cmd
搜索模式
:/root n往下匹配；N往上匹配

替换模式
:%s/root/ROOT/     全文搜索，替换每一行匹配到的第一个关键字
:%s/root/ROOT/g    全文搜索，替换每一行所有匹配到关键字
:%s/root/ROOT/gc   交互式替换
:%s/\/sbin\/nologin/\/bin\/bash/  \转义符
:%s#/sbin/nologin#/bin/bash#/g    更换分割符
:7s/shutdown/SHUTDOWN/g           替换第7行的内容

取消高亮
:noh (no highlight)

设置行号
:set number 或 :set nu

查看控制符
:set list

地址定位
:1,5 w /tmp/5.txt     保存1到5行的内容到文件
:r /tmp/5.txt         在光标所在行下面读取文件内容
:3r /tmp/5.txt        在当前文本的第3行后读取文件内容
:1,8d                 删除文本的1到8行
:nr !command          在第n行下面读取命令执行的结果
:n! command           用命令的结果替换第n行
```



## 4. 可视化模式



ctrl+v: 可视块

shift+v: 可视行

esc: 退出

